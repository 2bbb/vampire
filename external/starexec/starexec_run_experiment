#!/bin/sh

# Check if problem is hard enough

global_opt="--time_limit 3000" # --include /Users/giles/TPTPnew/TPTP-v6.1.0" 

while read line
do
   re="Rating.....([0-9].[0-9][0-9])" 
   if [[ $line =~ $re ]] 
   then
     rating=${BASH_REMATCH[1]}
     not_hard_enough=`echo "$rating < 0.8" | bc`
     echo $not_hard_enough
     if [ $not_hard_enough -eq 1 ]; then
       echo "Not hard enough (rating $rating)"
       exit
     fi
   fi
done < $1

# Run each strategy by itself

for i in `seq 1 30`;
do
    echo "Single strategy $i" 
    ./vampire_rel --strategies 1 --include_options strats/strat_$i $global_opt  $1
done

# Run strategies in multi mode but one at a time
echo "Multi strategy with 1"
./vampire_rel --strategies 30 --include_options strats/strat_all --multi_proof_attempt_concurrent 1 $global_opt $1

# Run strategies in multi mode with 5 at a time
echo "Multi strategy with 5"
./vampire_rel --strategies 30 --include_options strats/strat_all --multi_proof_attempt_concurrent 1 $global_opt $1

# Run strategies in multi mode
echo "Multi strategy with all"
./vampire_rel --strategies 30 --include_options strats/strat_all $global_opt $1

